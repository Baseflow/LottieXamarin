-
  branches:
      only:
        - master
        - /release\/.*/
  version: 1.0.{build}
  image: Visual Studio 2019
  before_build:
  - cmd: dotnet --info
  - cmd: dotnet tool install --tool-path . SignClient
  environment:
    NUGET_SOURCE: https://www.nuget.org/api/v2/package
    NUGET_APIKEY:
      secure: Kse62H9lWHIwjsqpi2ih1efUnHc5R6VfIzu1Nfr/CXcJSKPkH8EGElCIxvP43/Oh
    SIGNING_USER:
      secure: 
    SIGNING_SECRET:
      secure: 
    GITHUB_TOKEN:
      secure: D9GQsZK1etNdnyc39Ko8wsm5C8SbAjHiOyYr5E8K0KUKqFloOYSYP9n6zrcRawal
  build_script:
  - ps: .\build.ps1
  test: off
  cache:
  - '%USERPROFILE%\.nuget\packages -> **\project.json'  # project.json cache
-
  branches:
      only:
        - develop
  version: 1.0.{build}
  image: Visual Studio 2022
  before_build:
  - ps: |
      $ProgressPreference = 'SilentlyContinue'
      Invoke-WebRequest -Uri "https://dot.net/v1/dotnet-install.ps1" -OutFile dotnet-install.ps1
      & .\dotnet-install.ps1 -Version 6.0.300-preview.22154.4 -InstallDir "$env:ProgramFiles\dotnet\"
  - ps: |
      # Use uno-check to install an early .NET 6.0.300 rc1 build which does not require jumping through hoops: https://github.com/dotnet/maui/releases/tag/6.0.200-preview.14.2
      dotnet tool update --global uno.check --version 1.1.1 --add-source https://api.nuget.org/v3/index.json
      uno-check -v --ci --non-interactive --fix --skip xcode --skip gtk3 --skip vswin --skip vsmac --skip androidemulator --manifest https://raw.githubusercontent.com/unoplatform/uno.check/d14571a546b55f58e51e392c04cf098168d6fe2d/manifests/uno.ui-preview.manifest.json
  - cmd: dotnet --info
  - cmd: dotnet tool install --tool-path . SignClient
  environment:
    NUGET_SOURCE: https://nuget.pkg.github.com/martijn00/index.json
    NUGET_APIKEY:
      secure: 0PNC9eZWAinI1KkE9usbhPAwF1wudL5GJi6lJn9Ylb67M7SE17LIXBoMHuRKJaLE
    SIGNING_USER:
      secure: 
    SIGNING_SECRET:
      secure: 
    GITHUB_TOKEN:
      secure: D9GQsZK1etNdnyc39Ko8wsm5C8SbAjHiOyYr5E8K0KUKqFloOYSYP9n6zrcRawal
  build_script:
  - ps: .\build.ps1
  test: off
  cache:
  - '%USERPROFILE%\.nuget\packages -> **\project.json'  # project.json cache